<div class=" pl-5 py-5 m-auto mt-5 bg-white pro ">
  <div class="buttons pb-3">

    <h6>My Tasks</h6>

  </div>


  <p-dialog header="Task Details" [modal]="true" [(visible)]="visible1" [style]="{width: '50vw', height:'80vh'}">
    <div class="flex items-center justify-center h-full">
      <div class="max-w-4xl bg-white w-full rounded-lg  p-6 ">
        <div *ngFor="let task of tasks; let i = index" [hidden]="task.taskId !== taskId">
          <div class="border-b mb-4">
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Task name:</div>
              <div>{{ task.taskName }}</div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Project Name:</div>
              <div>{{ task.projectName }}</div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Start Date:</div>
              <div>{{ task.taskStart | date }}</div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Deadline:</div>
              <div>{{ task.taskDeadline | date }}</div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4 ">
              <div class="text-gray-600">Priority:</div>
              <div>
                <div class="inline-block px-3 py-1 rounded-full text-xs font-semibold bg-{{getColor(task.taskPriority)}}-100 text-{{getColor(task.taskPriority)}}-600"
                     >
                  {{ task.taskPriority }}
                </div>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Manager:</div>
              <div>
                {{ task.managerName }} - <span class="text-blue-500">{{ task.managerEmail }}</span>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4">
              <div class="text-gray-600">Budget:</div>
              <div>${{ task.taskBudget }}</div>
            </div>
            <div class="grid grid-cols-2 gap-4 mt-4 mb-4">
              <div class="text-gray-600">Description:</div>
              <div>{{ task.taskDescription }}</div>
            </div>
          </div>
        </div>

        <div class="mt-6">
          <h3 class="font-bold mb-4">Comments</h3>
          <div  class="border rounded-md p-3 mb-3">
            <div class="flex items-center gap-3">
              <img src="https://avatars.githubusercontent.com/u/22263436?v=4"
                   class="object-cover w-8 h-8 rounded-full border-2 border-emerald-400 shadow-emerald-400">
              <h3 class="font-bold">User Name</h3>
            </div>
            <p class="text-gray-600 mt-2">jhghkhjb</p>
          </div>
          <form>
            <textarea class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white mb-4"
                      name="body" placeholder="Type Your Comment" required></textarea>
            <div class="flex justify-end">
              <button type="submit" class="px-4 py-2 rounded-md text-white text-sm bg-blue-500 hover:bg-blue-600">Post Comment</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </p-dialog>


  <p-dialog header="SubTasks" [modal]="true" [(visible)]="visible2" [style]="{width: '40vw'}">



  <div class="relative w-full max-w-lg">

    <div class=" relative space-y-4">
      <div class="p-5 bg-gray-100 rounded-lg flex items-center justify-between space-x-8">
        <div class="flex-1 flex justify-between items-center">
          <div class="h-4 w-48 bg-gray-300 rounded"></div>
          <div class="w-24 h-6 rounded-lg bg-purple-300"></div>
        </div>
      </div>
      <div class="p-5 bg-gray-100 rounded-lg flex items-center justify-between space-x-8">
        <div class="flex-1 flex justify-between items-center">
          <div class="h-4 w-48 bg-gray-300 rounded"></div>
          <div class="w-24 h-6 rounded-lg bg-purple-300"></div>
        </div>
      </div>
      <div class="p-5 bg-gray-100 rounded-lg flex items-center justify-between space-x-8">
        <div class="flex-1 flex justify-between items-center">
          <div class="h-4 w-48 bg-gray-300 rounded"></div>
          <div class="w-24 h-6 rounded-lg bg-purple-300"></div>
        </div>
      </div>
    </div>
  </div>


  </p-dialog>


  <table class=" w-auto min-w-max table-auto text-left ">
    <thead>
      <tr>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
            <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center text-center justify-between gap-2 font-normal leading-none opacity-70">Task Name
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Lead
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Progress <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-4 w-4">

            </svg>
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Status <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-4 w-4">

            </svg>
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Priority <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-4 w-4">

            </svg>
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Deadline <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-4 w-4">

            </svg>
          </p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Project</p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">Details</p>
        </th>
        <th class="cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50">
          <p class="antialiased font-sans text-sm text-blue-gray-900 flex items-center justify-between gap-2 font-normal leading-none opacity-70">SubTasks</p>
        </th>
      </tr>
    </thead>
    <tbody>
      @for(task of tasks; track task.id){
        <tr  >
        <td class="p-4 border-b border-blue-gray-50">
          <div class="flex items-center gap-3">
            <div class="flex flex-col">
              <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal">{{task.taskName}}</p>
              <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal opacity-70">Start: {{ task.taskStart | date }}</p>
            </div>
          </div>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <div class="flex items-center gap-3">
            <img src="assets/images/{{task.managerPhoto}}" alt="John Michael" class="inline-block relative object-cover object-center !rounded-full w-9 h-9 rounded-md">
            <div class="flex flex-col">
              <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal">{{task.managerName}}</p>
              <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal opacity-70">{{task.managerEmail}}</p>
            </div>
          </div>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <div class="flex items-center gap-3">
            <div class="overflow-hidden bg-blue-50 h-1.5 rounded-full w-full">
              <span
                class="h-full bg-blue-500 w-full block rounded-full"
                style="width: 62%"
              ></span>

            </div>
            <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal opacity-70">60%</p>
          </div>
        </td>


        <td class="p-4 border-b border-blue-gray-50">
          <div class="w-max">
            <div class="relative grid items-center font-sans font-bold uppercase whitespace-nowrap select-none bg-green-500/20 text-green-600 py-1 px-2 text-xs rounded-md" style="opacity: 1;">
              <span class="">{{task.taskStatus}}</span>
            </div>
          </div>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <div class="w-max">
            <ng-container *ngFor="let c of colors">
              <div class="relative grid items-center font-sans font-bold uppercase whitespace-nowrap select-none bg-{{c}}-100 text-{{c}}-600 py-1 px-2 text-xs rounded-md" style="opacity: 1;">
              <span class="">{{task.taskPriority}}</span>
            </div>
            </ng-container>

          </div>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal">{{task.taskDeadline | date}}</p>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <p class="block antialiased font-sans text-sm leading-normal text-blue-gray-900 font-normal">{{task.projectName}}</p>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <a class="block antialiased font-sans text-sm leading-normal text-blue-600 font-normal"  (click)="showDetailsDialog(task.taskId)">more...</a>
        </td>
        <td class="p-4 border-b border-blue-gray-50">
          <a class="block antialiased font-sans text-sm leading-normal text-blue-600 font-normal"  (click)="showSubDialog(task.taskId)">sub</a>
        </td>
      </tr>
      }



    </tbody>
  </table>
</div>
